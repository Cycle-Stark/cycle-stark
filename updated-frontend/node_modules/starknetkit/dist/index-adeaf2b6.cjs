"use strict";var Kr=Object.defineProperty;var en=(t,e,r)=>e in t?Kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var oe=(t,e,r)=>(en(t,typeof e!="symbol"?e+"":e,r),r);const N=require("./connector-14f8958c.cjs"),nr=require("starknet"),xt="https://web.argent.xyz",Mt=`<svg
    width="32"
    height="28"
    viewBox="0 0 18 14"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M1.5 0.4375C0.982233 0.4375 0.5625 0.857233 0.5625 1.375V12C0.5625 12.4144 0.72712 12.8118 1.02015 13.1049C1.31317 13.3979 1.7106 13.5625 2.125 13.5625H15.875C16.2894 13.5625 16.6868 13.3979 16.9799 13.1049C17.2729 12.8118 17.4375 12.4144 17.4375 12V1.375C17.4375 0.857233 17.0178 0.4375 16.5 0.4375H1.5ZM2.4375 3.50616V11.6875H15.5625V3.50616L9.63349 8.94108C9.27507 9.26964 8.72493 9.26964 8.36651 8.94108L2.4375 3.50616ZM14.0899 2.3125H3.91013L9 6.97822L14.0899 2.3125Z"
      fill="currentColor"
    />
  </svg>`,$t="https://api.hydrogen.argent47.net/v1/starknet/goerli/rpc/v0.5",at="https://cloud.argent-api.com/v1/starknet/goerli/rpc/v0.5";function tn(t){return t}function rn(t){return t.length===0?tn:t.length===1?t[0]:function(r){return t.reduce((n,s)=>s(n),r)}}function nn(t){return typeof t=="object"&&t!==null&&"subscribe"in t}function Ge(t){const e={subscribe(r){let n=null,s=!1,i=!1,o=!1;function a(){if(n===null){o=!0;return}i||(i=!0,typeof n=="function"?n():n&&n.unsubscribe())}return n=t({next(c){s||r.next?.(c)},error(c){s||(s=!0,r.error?.(c),a())},complete(){s||(s=!0,r.complete?.(),a())}}),o&&a(),{unsubscribe:a}},pipe(...r){return rn(r)(e)}};return e}function sr(t){return e=>{let r=0,n=null;const s=[];function i(){n||(n=e.subscribe({next(a){for(const c of s)c.next?.(a)},error(a){for(const c of s)c.error?.(a)},complete(){for(const a of s)a.complete?.()}}))}function o(){if(r===0&&n){const a=n;n=null,a.unsubscribe()}}return{subscribe(a){return r++,s.push(a),i(),{unsubscribe(){r--,o();const c=s.findIndex(u=>u===a);c>-1&&s.splice(c,1)}}}}}}function sn(t){return e=>({subscribe(r){let n=0;return e.subscribe({next(i){r.next?.(t(i,n++))},error(i){r.error?.(i)},complete(){r.complete?.()}})}})}function ir(t){return e=>({subscribe(r){return e.subscribe({next(n){t.next?.(n),r.next?.(n)},error(n){t.error?.(n),r.error?.(n)},complete(){t.complete?.(),r.complete?.()}})}})}let on=class or extends Error{constructor(e){super(e),this.name="ObservableAbortError",Object.setPrototypeOf(this,or.prototype)}};function ar(t){let e;return{promise:new Promise((n,s)=>{let i=!1;function o(){i||(i=!0,s(new on("This operation was aborted.")),a.unsubscribe())}const a=t.subscribe({next(c){i=!0,n(c),o()},error(c){i=!0,s(c),o()},complete(){i=!0,o()}});e=o}),abort:e}}const an=Object.freeze(Object.defineProperty({__proto__:null,isObservable:nn,map:sn,observable:Ge,observableToPromise:ar,share:sr,tap:ir},Symbol.toStringTag,{value:"Module"}));function cr(t){return Ge(e=>{function r(s=0,i=t.op){const o=t.links[s];if(!o)throw new Error("No more links to execute - did you forget to add an ending link?");return o({op:i,next(c){return r(s+1,c)}})}return r().subscribe(e)})}function Dt(t){return Array.isArray(t)?t:[t]}function cn(t){return e=>{const r=Dt(t.true).map(s=>s(e)),n=Dt(t.false).map(s=>s(e));return s=>Ge(i=>{const o=t.condition(s.op)?r:n;return cr({op:s.op,links:o}).subscribe(i)})}}function un(t){return t instanceof ur||t.name==="TRPCClientError"}let ur=class je extends Error{static from(e,r={}){return e instanceof Error?un(e)?(r.meta&&(e.meta={...e.meta,...r.meta}),e):new je(e.message,{...r,cause:e,result:null}):new je(e.error.message??"",{...r,cause:void 0,result:e})}constructor(e,r){const n=r?.cause;super(e,{cause:n}),this.meta=r?.meta,this.cause=n,this.shape=r?.result?.error,this.data=r?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,je.prototype)}};function lr(t){const e=Object.create(null);for(const r in t){const n=t[r];e[n]=r}return e}const Ye={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};lr(Ye);lr(Ye);const ln={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,FORBIDDEN:403,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501};function dn(t){return ln[t]??500}function dr(t){return dn(t.code)}const fr=()=>{};function pr(t,e){return new Proxy(fr,{get(n,s){if(!(typeof s!="string"||s==="then"))return pr(t,[...e,s])},apply(n,s,i){const o=e[e.length-1]==="apply";return t({args:o?i.length>=2?i[1]:[]:i,path:o?e.slice(0,-1):e})}})}const Tt=t=>pr(t,[]),Et=t=>new Proxy(fr,{get(e,r){if(!(typeof r!="string"||r==="then"))return t(r)}});function fn(t){const{path:e,error:r,config:n}=t,{code:s}=t.error,i={message:r.message,code:Ye[s],data:{code:s,httpStatus:dr(r)}};return n.isDev&&typeof t.error.stack=="string"&&(i.data.stack=t.error.stack),typeof e=="string"&&(i.data.path=e),n.errorFormatter({...t,shape:i})}function Zt(t,e){return"error"in e?{...e,error:t.transformer.output.serialize(e.error)}:"data"in e.result?{...e,result:{...e.result,data:t.transformer.output.serialize(e.result.data)}}:e}function pn(t,e){return Array.isArray(e)?e.map(r=>Zt(t,r)):Zt(t,e)}const hn=Object.freeze(Object.defineProperty({__proto__:null,createFlatProxy:Et,createRecursiveProxy:Tt,getErrorShape:fn,transformTRPCResponse:pn},Symbol.toStringTag,{value:"Module"}));function mn(t){return typeof FormData>"u"?!1:t instanceof FormData}const ct={css:{query:["72e3ff","3fb0d8"],mutation:["c5a3fc","904dfc"],subscription:["ff49e1","d83fbe"]},ansi:{regular:{query:["\x1B[30;46m","\x1B[97;46m"],mutation:["\x1B[30;45m","\x1B[97;45m"],subscription:["\x1B[30;42m","\x1B[97;42m"]},bold:{query:["\x1B[1;30;46m","\x1B[1;97;46m"],mutation:["\x1B[1;30;45m","\x1B[1;97;45m"],subscription:["\x1B[1;30;42m","\x1B[1;97;42m"]}}};function yn(t){const{direction:e,type:r,path:n,id:s,input:i}=t,o=[],a=[];if(t.colorMode==="ansi"){const[h,m]=ct.ansi.regular[r],[x,E]=ct.ansi.bold[r],S="\x1B[0m";return o.push(e==="up"?h:m,e==="up"?">>":"<<",r,e==="up"?x:E,`#${s}`,n,S),e==="up"?a.push({input:t.input}):a.push({input:t.input,result:"result"in t.result?t.result.result:t.result,elapsedMs:t.elapsedMs}),{parts:o,args:a}}const[c,u]=ct.css[r],l=`
    background-color: #${e==="up"?c:u}; 
    color: ${e==="up"?"black":"white"};
    padding: 2px;
  `;return o.push("%c",e==="up"?">>":"<<",r,`#${s}`,`%c${n}%c`,"%O"),a.push(l,`${l}; font-weight: bold;`,`${l}; font-weight: normal;`),e==="up"?a.push({input:i,context:t.context}):a.push({input:i,result:t.result,elapsedMs:t.elapsedMs,context:t.context}),{parts:o,args:a}}const gn=({c:t=console,colorMode:e="css"})=>r=>{const n=r.input,s=mn(n)?Object.fromEntries(n):n,{parts:i,args:o}=yn({...r,colorMode:e,input:s}),a=r.direction==="down"&&r.result&&(r.result instanceof Error||"error"in r.result.result)?"error":"log";t[a].apply(null,[i.join(" ")].concat(o))};function _n(t={}){const{enabled:e=()=>!0}=t,r=t.colorMode??(typeof window>"u"?"ansi":"css"),{logger:n=gn({c:t.console,colorMode:r})}=t;return()=>({op:s,next:i})=>Ge(o=>{e({...s,direction:"up"})&&n({...s,direction:"up"});const a=Date.now();function c(u){const l=Date.now()-a;e({...s,direction:"down",result:u})&&n({...s,direction:"down",elapsedMs:l,result:u})}return i(s).pipe(ir({next(u){c(u)},error(u){c(u)}})).subscribe(o)})}let bn=class{$request({type:e,input:r,path:n,context:s={}}){return cr({links:this.links,op:{id:++this.requestId,type:e,path:n,input:r,context:s}}).pipe(sr())}requestAsPromise(e){const r=this.$request(e),{promise:n,abort:s}=ar(r);return new Promise((o,a)=>{e.signal?.addEventListener("abort",s),n.then(c=>{o(c.result.data)}).catch(c=>{a(ur.from(c))})})}query(e,r,n){return this.requestAsPromise({type:"query",path:e,input:r,context:n?.context,signal:n?.signal})}mutation(e,r,n){return this.requestAsPromise({type:"mutation",path:e,input:r,context:n?.context,signal:n?.signal})}subscription(e,r,n){return this.$request({type:"subscription",path:e,input:r,context:n?.context}).subscribe({next(i){i.result.type==="started"?n.onStarted?.():i.result.type==="stopped"?n.onStopped?.():n.onData?.(i.result.data)},error(i){n.onError?.(i)},complete(){n.onComplete?.()}})}constructor(e){this.requestId=0;const r=(()=>{const n=e.transformer;return n?"input"in n?e.transformer:{input:n,output:n}:{input:{serialize:s=>s,deserialize:s=>s},output:{serialize:s=>s,deserialize:s=>s}}})();this.runtime={transformer:{serialize:n=>r.input.serialize(n),deserialize:n=>r.output.deserialize(n)},combinedTransformer:r},this.links=e.links.map(n=>n(this.runtime))}};const vn={query:"query",mutate:"mutation",subscribe:"subscription"},wn=t=>vn[t];function xn(t){return Et(e=>t.hasOwnProperty(e)?t[e]:e==="__untypedClient"?t:Tt(({path:r,args:n})=>{const s=[e,...r],i=wn(s.pop()),o=s.join(".");return t[i](o,...n)}))}function Tn(t){const e=new bn(t);return xn(e)}function En(t){return!!t&&!Array.isArray(t)&&typeof t=="object"}function kn(t){if(t instanceof le)return t;const e=new le({code:"INTERNAL_SERVER_ERROR",cause:t});return t instanceof Error&&t.stack&&(e.stack=t.stack),e}class Cn extends Error{}function Rn(t){if(t instanceof Error)return t;const e=typeof t;if(!(e==="undefined"||e==="function"||t===null)){if(e!=="object")return new Error(String(t));if(En(t)){const r=new Cn;for(const n in t)r[n]=t[n];return r}}}class le extends Error{constructor(e){const r=Rn(e.cause),n=e.message??r?.message??e.code;super(n,{cause:r}),this.code=e.code,this.name=this.constructor.name}}function On(t){return"input"in t?t:{input:t,output:t}}const ye={_default:!0,input:{serialize:t=>t,deserialize:t=>t},output:{serialize:t=>t,deserialize:t=>t}},ge=({shape:t})=>t;function Pn(t){return Object.assign(Object.create(null),t)}const Sn=["query","mutation","subscription"];function Nn(t){return"router"in t._def}const Ln={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:ge,transformer:ye},In=["then"];function hr(t){return function(r){const n=new Set(Object.keys(r).filter(c=>In.includes(c)));if(n.size>0)throw new Error("Reserved words used in `router({})` call: "+Array.from(n).join(", "));const s=Pn({});function i(c,u=""){for(const[l,h]of Object.entries(c??{})){const m=`${u}${l}`;if(Nn(h)){i(h._def.procedures,`${m}.`);continue}if(s[m])throw new Error(`Duplicate key: ${m}`);s[m]=h}}i(r);const o={_config:t,router:!0,procedures:s,...Ln,record:r,queries:Object.entries(s).filter(c=>c[1]._def.query).reduce((c,[u,l])=>({...c,[u]:l}),{}),mutations:Object.entries(s).filter(c=>c[1]._def.mutation).reduce((c,[u,l])=>({...c,[u]:l}),{}),subscriptions:Object.entries(s).filter(c=>c[1]._def.subscription).reduce((c,[u,l])=>({...c,[u]:l}),{})};return{...r,_def:o,createCaller(c){return Tt(({path:l,args:h})=>{if(l.length===1&&Sn.includes(l[0]))return jn({procedures:o.procedures,path:h[0],rawInput:h[1],ctx:c,type:l[0]});const m=l.join("."),x=o.procedures[m];let E="query";return x._def.mutation?E="mutation":x._def.subscription&&(E="subscription"),x({path:m,rawInput:h[0],ctx:c,type:E})})},getErrorShape(c){const{path:u,error:l}=c,{code:h}=c.error,m={message:l.message,code:Ye[h],data:{code:h,httpStatus:dr(l)}};return t.isDev&&typeof c.error.stack=="string"&&(m.data.stack=c.error.stack),typeof u=="string"&&(m.data.path=u),this._def._config.errorFormatter({...c,shape:m})}}}}function jn(t){const{type:e,path:r}=t;if(!(r in t.procedures)||!t.procedures[r]?._def[e])throw new le({code:"NOT_FOUND",message:`No "${e}"-procedure on path "${r}"`});const n=t.procedures[r];return n(t)}const Ut=typeof window>"u"||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID;function Wt(t){const e=t;if(typeof e=="function")return e;if(typeof e.parseAsync=="function")return e.parseAsync.bind(e);if(typeof e.parse=="function")return e.parse.bind(e);if(typeof e.validateSync=="function")return e.validateSync.bind(e);if(typeof e.create=="function")return e.create.bind(e);if(typeof e.assert=="function")return r=>(e.assert(r),r);throw new Error("Could not find a validator fn")}function mr(t,...e){const r=Object.assign(Object.create(null),t);for(const n of e)for(const s in n){if(s in r&&r[s]!==n[s])throw new Error(`Duplicate key ${s}`);r[s]=n[s]}return r}function An(){function t(r){return{_middlewares:r,unstable_pipe(n){const s="_middlewares"in n?n._middlewares:[n];return t([...r,...s])}}}function e(r){return t([r])}return e}function qt(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Mn(t){const e=async({next:r,rawInput:n,input:s})=>{let i;try{i=await t(n)}catch(a){throw new le({code:"BAD_REQUEST",cause:a})}const o=qt(s)&&qt(i)?{...s,...i}:i;return r({input:o})};return e._type="input",e}function $n(t){const e=async({next:r})=>{const n=await r();if(!n.ok)return n;try{const s=await t(n.data);return{...n,data:s}}catch(s){throw new le({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:s})}};return e._type="output",e}const yr="middlewareMarker";function ae(t,e){const{middlewares:r=[],inputs:n,meta:s,...i}=e;return gr({...mr(t,i),inputs:[...t.inputs,...n??[]],middlewares:[...t.middlewares,...r],meta:t.meta&&s?{...t.meta,...s}:s??t.meta})}function gr(t={}){const e={inputs:[],middlewares:[],...t};return{_def:e,input(r){const n=Wt(r);return ae(e,{inputs:[r],middlewares:[Mn(n)]})},output(r){const n=Wt(r);return ae(e,{output:r,middlewares:[$n(n)]})},meta(r){return ae(e,{meta:r})},unstable_concat(r){return ae(e,r._def)},use(r){const n="_middlewares"in r?r._middlewares:[r];return ae(e,{middlewares:n})},query(r){return ut({...e,query:!0},r)},mutation(r){return ut({...e,mutation:!0},r)},subscription(r){return ut({...e,subscription:!0},r)}}}function ut(t,e){const r=ae(t,{resolver:e,middlewares:[async function(s){const i=await e(s);return{marker:yr,ok:!0,data:i,ctx:s.ctx}}]});return Zn(r._def)}const Dn=`
If you want to call this function on the server, you do the following:
This is a client-only function.

const caller = appRouter.createCaller({
  /* ... your context */
});

const result = await caller.call('myProcedure', input);
`.trim();function Zn(t){const e=async function(n){if(!n||!("rawInput"in n))throw new Error(Dn);const s=async(o={index:0,ctx:n.ctx})=>{try{const a=t.middlewares[o.index];return await a({ctx:o.ctx,type:n.type,path:n.path,rawInput:o.rawInput??n.rawInput,meta:t.meta,input:o.input,next(u){const l=u;return s({index:o.index+1,ctx:l&&"ctx"in l?{...o.ctx,...l.ctx}:o.ctx,input:l&&"input"in l?l.input:o.input,rawInput:l&&"rawInput"in l?l.rawInput:o.rawInput})}})}catch(a){return{ok:!1,error:kn(a),marker:yr}}},i=await s();if(!i)throw new le({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!i.ok)throw i.error;return i.data};return e._def=t,e.meta=t.meta,e}function Un(...t){const e=mr({},...t.map(i=>i._def.record)),r=t.reduce((i,o)=>{if(o._def._config.errorFormatter&&o._def._config.errorFormatter!==ge){if(i!==ge&&i!==o._def._config.errorFormatter)throw new Error("You seem to have several error formatters");return o._def._config.errorFormatter}return i},ge),n=t.reduce((i,o)=>{if(o._def._config.transformer&&o._def._config.transformer!==ye){if(i!==ye&&i!==o._def._config.transformer)throw new Error("You seem to have several transformers");return o._def._config.transformer}return i},ye);return hr({errorFormatter:r,transformer:n,isDev:t.some(i=>i._def._config.isDev),allowOutsideOfServer:t.some(i=>i._def._config.allowOutsideOfServer),isServer:t.some(i=>i._def._config.isServer),$types:t[0]?._def._config.$types})(e)}class De{context(){return new De}meta(){return new De}create(e){return qn()(e)}}const Wn=new De;function qn(){return function(e){const r=e?.errorFormatter??ge,s={transformer:On(e?.transformer??ye),isDev:e?.isDev??globalThis.process?.env?.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:r,isServer:e?.isServer??Ut,$types:Et(i=>{throw new Error(`Tried to access "$types.${i}" which is not available at runtime`)})};if(!(e?.isServer??Ut)&&e?.allowOutsideOfServer!==!0)throw new Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:s,procedure:gr({meta:e?.defaultMeta}),middleware:An(),router:hr(s),mergeRouters:Un}}}var mt={},Qe={},pe={},O={};const he=N.getAugmentedNamespace(an);var kt={},_r=he;function br(t){return _r.observable(e=>{function r(s=0,i=t.op){const o=t.links[s];if(!o)throw new Error("No more links to execute - did you forget to add an ending link?");return o({op:i,next(c){return r(s+1,c)}})}return r().subscribe(e)})}function zt(t){return Array.isArray(t)?t:[t]}function zn(t){return e=>{const r=zt(t.true).map(s=>s(e)),n=zt(t.false).map(s=>s(e));return s=>_r.observable(i=>{const o=t.condition(s.op)?r:n;return br({op:s.op,links:o}).subscribe(i)})}}kt.createChain=br;kt.splitLink=zn;var me={};function Bn(t){return t instanceof vr||t.name==="TRPCClientError"}let vr=class Ae extends Error{static from(e,r={}){return e instanceof Error?Bn(e)?(r.meta&&(e.meta={...e.meta,...r.meta}),e):new Ae(e.message,{...r,cause:e,result:null}):new Ae(e.error.message??"",{...r,cause:void 0,result:e})}constructor(e,r){const n=r?.cause;super(e,{cause:n}),this.meta=r?.meta,this.cause=n,this.shape=r?.result?.error,this.data=r?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,Ae.prototype)}};me.TRPCClientError=vr;const Vn=N.getAugmentedNamespace(hn);var z={},Hn=me;const Bt=t=>typeof t=="function";function wr(t){if(t)return t;if(typeof window<"u"&&Bt(window.fetch))return window.fetch;if(typeof globalThis<"u"&&Bt(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function Fn(t){return t||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function Jn(t){return{url:t.url,fetch:t.fetch,AbortController:Fn(t.AbortController)}}function Gn(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[r]=n}return e}const Yn={query:"GET",mutation:"POST"};function xr(t){return"input"in t?t.runtime.transformer.serialize(t.input):Gn(t.inputs.map(e=>t.runtime.transformer.serialize(e)))}const Tr=t=>{let e=t.url+"/"+t.path;const r=[];if("inputs"in t&&r.push("batch=1"),t.type==="query"){const n=xr(t);n!==void 0&&r.push(`input=${encodeURIComponent(JSON.stringify(n))}`)}return r.length&&(e+="?"+r.join("&")),e},Er=t=>{if(t.type==="query")return;const e=xr(t);return e!==void 0?JSON.stringify(e):void 0},Qn=t=>Cr({...t,contentTypeHeader:"application/json",getUrl:Tr,getBody:Er});async function kr(t,e){const r=t.getUrl(t),n=t.getBody(t),{type:s}=t,i=await t.headers();/* istanbul ignore if -- @preserve */if(s==="subscription")throw new Error("Subscriptions should use wsLink");const o={...t.contentTypeHeader?{"content-type":t.contentTypeHeader}:{},...t.batchModeHeader?{"trpc-batch-mode":t.batchModeHeader}:{},...i};return wr(t.fetch)(r,{method:Yn[s],signal:e?.signal,body:n,headers:o})}function Cr(t){const e=t.AbortController?new t.AbortController:null,r={};return{promise:new Promise((i,o)=>{kr(t,e).then(a=>(r.response=a,a.json())).then(a=>{r.responseJSON=a,i({json:a,meta:r})}).catch(a=>{o(Hn.TRPCClientError.from(a,{meta:r}))})}),cancel:()=>{e?.abort()}}}z.fetchHTTPResponse=kr;z.getBody=Er;z.getFetch=wr;z.getUrl=Tr;z.httpRequest=Cr;z.jsonHttpRequester=Qn;z.resolveHTTPLinkOptions=Jn;var Ct={},Xe={};function Vt(t){return!!t&&!Array.isArray(t)&&typeof t=="object"}function Xn(t,e){if("error"in t){const n=e.transformer.deserialize(t.error);return{ok:!1,error:{...t,error:n}}}return{ok:!0,result:{...t.result,...(!t.result.type||t.result.type==="data")&&{type:"data",data:e.transformer.deserialize(t.result.data)}}}}class lt extends Error{constructor(){super("Unable to transform response from server")}}function Kn(t,e){let r;try{r=Xn(t,e)}catch{throw new lt}if(!r.ok&&(!Vt(r.error.error)||typeof r.error.error.code!="number"))throw new lt;if(r.ok&&!Vt(r.result))throw new lt;return r}Xe.transformResult=Kn;var es=he,ts=Xe,Ht=me,yt=z;const dt=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function ft(t){let e=null,r=null;const n=()=>{clearTimeout(r),r=null,e=null};function s(a){const c=[[]];let u=0;for(;;){const l=a[u];if(!l)break;const h=c[c.length-1];if(l.aborted){l.reject?.(new Error("Aborted")),u++;continue}if(t.validate(h.concat(l).map(x=>x.key))){h.push(l),u++;continue}if(h.length===0){l.reject?.(new Error("Input is too big for a single dispatch")),u++;continue}c.push([])}return c}function i(){const a=s(e);n();for(const c of a){if(!c.length)continue;const u={items:c,cancel:dt};for(const x of c)x.batch=u;const l=(x,E)=>{const S=u.items[x];S.resolve?.(E),S.batch=null,S.reject=null,S.resolve=null},{promise:h,cancel:m}=t.fetch(u.items.map(x=>x.key),l);u.cancel=m,h.then(x=>{for(let E=0;E<x.length;E++){const S=x[E];l(E,S)}for(const E of u.items)E.reject?.(new Error("Missing result")),E.batch=null}).catch(x=>{for(const E of u.items)E.reject?.(x),E.batch=null})}}function o(a){const c={aborted:!1,key:a,batch:null,resolve:dt,reject:dt},u=new Promise((h,m)=>{c.reject=m,c.resolve=h,e||(e=[]),e.push(c)});return r||(r=setTimeout(i)),{promise:u,cancel:()=>{c.aborted=!0,c.batch?.items.every(h=>h.aborted)&&(c.batch.cancel(),c.batch=null)}}}return{load:o}}function Rr(t){return function(r){const n=yt.resolveHTTPLinkOptions(r),s=r.maxURLLength??1/0;return i=>{const o=h=>{const m=E=>{if(s===1/0)return!0;const S=E.map(B=>B.path).join(","),se=E.map(B=>B.input);return yt.getUrl({...n,runtime:i,type:h,path:S,inputs:se}).length<=s},x=t({...n,runtime:i,type:h,opts:r});return{validate:m,fetch:x}},a=ft(o("query")),c=ft(o("mutation")),u=ft(o("subscription")),l={query:a,subscription:u,mutation:c};return({op:h})=>es.observable(m=>{const x=l[h.type],{promise:E,cancel:S}=x.load(h);let se;return E.then(A=>{se=A;const B=ts.transformResult(A.json,i);if(!B.ok){m.error(Ht.TRPCClientError.from(B.error,{meta:A.meta}));return}m.next({context:A.meta,result:B.result}),m.complete()}).catch(A=>{m.error(Ht.TRPCClientError.from(A,{meta:se?.meta}))}),()=>{S()}})}}}const rs=t=>e=>{const r=e.map(o=>o.path).join(","),n=e.map(o=>o.input),{promise:s,cancel:i}=yt.jsonHttpRequester({...t,path:r,inputs:n,headers(){return t.opts.headers?typeof t.opts.headers=="function"?t.opts.headers({opList:e}):t.opts.headers:{}}});return{promise:s.then(o=>(Array.isArray(o.json)?o.json:e.map(()=>o.json)).map(u=>({meta:o.meta,json:u}))),cancel:i}},ns=Rr(rs);Ct.createHTTPBatchLink=Rr;Ct.httpBatchLink=ns;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});var ss=he,is=Xe,Ft=me,Or=z;function Pr(t){return e=>{const r=Or.resolveHTTPLinkOptions(e);return n=>({op:s})=>ss.observable(i=>{const{path:o,input:a,type:c}=s,{promise:u,cancel:l}=t.requester({...r,runtime:n,type:c,path:o,input:a,headers(){return e.headers?typeof e.headers=="function"?e.headers({op:s}):e.headers:{}}});let h;return u.then(m=>{h=m.meta;const x=is.transformResult(m.json,n);if(!x.ok){i.error(Ft.TRPCClientError.from(x.error,{meta:h}));return}i.next({context:m.meta,result:x.result}),i.complete()}).catch(m=>{i.error(Ft.TRPCClientError.from(m,{meta:h}))}),()=>{l()}})}}const os=Pr({requester:Or.jsonHttpRequester});Ke.httpLink=os;Ke.httpLinkFactory=Pr;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var Jt=he;function as(t){return typeof FormData>"u"?!1:t instanceof FormData}const pt={css:{query:["72e3ff","3fb0d8"],mutation:["c5a3fc","904dfc"],subscription:["ff49e1","d83fbe"]},ansi:{regular:{query:["\x1B[30;46m","\x1B[97;46m"],mutation:["\x1B[30;45m","\x1B[97;45m"],subscription:["\x1B[30;42m","\x1B[97;42m"]},bold:{query:["\x1B[1;30;46m","\x1B[1;97;46m"],mutation:["\x1B[1;30;45m","\x1B[1;97;45m"],subscription:["\x1B[1;30;42m","\x1B[1;97;42m"]}}};function cs(t){const{direction:e,type:r,path:n,id:s,input:i}=t,o=[],a=[];if(t.colorMode==="ansi"){const[h,m]=pt.ansi.regular[r],[x,E]=pt.ansi.bold[r],S="\x1B[0m";return o.push(e==="up"?h:m,e==="up"?">>":"<<",r,e==="up"?x:E,`#${s}`,n,S),e==="up"?a.push({input:t.input}):a.push({input:t.input,result:"result"in t.result?t.result.result:t.result,elapsedMs:t.elapsedMs}),{parts:o,args:a}}const[c,u]=pt.css[r],l=`
    background-color: #${e==="up"?c:u}; 
    color: ${e==="up"?"black":"white"};
    padding: 2px;
  `;return o.push("%c",e==="up"?">>":"<<",r,`#${s}`,`%c${n}%c`,"%O"),a.push(l,`${l}; font-weight: bold;`,`${l}; font-weight: normal;`),e==="up"?a.push({input:i,context:t.context}):a.push({input:i,result:t.result,elapsedMs:t.elapsedMs,context:t.context}),{parts:o,args:a}}const us=({c:t=console,colorMode:e="css"})=>r=>{const n=r.input,s=as(n)?Object.fromEntries(n):n,{parts:i,args:o}=cs({...r,colorMode:e,input:s}),a=r.direction==="down"&&r.result&&(r.result instanceof Error||"error"in r.result.result)?"error":"log";t[a].apply(null,[i.join(" ")].concat(o))};function ls(t={}){const{enabled:e=()=>!0}=t,r=t.colorMode??(typeof window>"u"?"ansi":"css"),{logger:n=us({c:t.console,colorMode:r})}=t;return()=>({op:s,next:i})=>Jt.observable(o=>{e({...s,direction:"up"})&&n({...s,direction:"up"});const a=Date.now();function c(u){const l=Date.now()-a;e({...s,direction:"down",result:u})&&n({...s,direction:"down",elapsedMs:l,result:u})}return i(s).pipe(Jt.tap({next(u){c(u)},error(u){c(u)}})).subscribe(o)})}Rt.loggerLink=ls;var et={};Object.defineProperty(et,"__esModule",{value:!0});var ds=he,fs=Xe,Sr=me;/* istanbul ignore next -- @preserve */const ps=t=>t===0?0:Math.min(1e3*2**t,3e4);function hs(t){const{url:e,WebSocket:r=WebSocket,retryDelayMs:n=ps,onOpen:s,onClose:i}=t;/* istanbul ignore next -- @preserve */if(!r)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");let o=[];const a=Object.create(null);let c=0,u=null,l=null,h=jt(),m="connecting";function x(){m!=="open"||u||(u=setTimeout(()=>{u=null,o.length===1?h.send(JSON.stringify(o.pop())):h.send(JSON.stringify(o)),o=[]}))}function E(){if(l!==null||m==="closed")return;const R=n(c++);se(R)}function S(){m="connecting";const R=h;h=jt(),A(R)}function se(R){l||(m="connecting",l=setTimeout(S,R))}function A(R){Object.values(a).some(ie=>ie.ws===R)||R.close()}function B(){Object.values(a).forEach(R=>{R.type==="subscription"&&R.callbacks.complete()})}function It(R){o.some(P=>P.id===R.op.id)||At(R.op,R.callbacks)}function jt(){const R=typeof e=="function"?e():e,P=new r(R);clearTimeout(l),l=null,P.addEventListener("open",()=>{/* istanbul ignore next -- @preserve */P===h&&(c=0,m="open",s?.(),x())}),P.addEventListener("error",()=>{P===h&&E()});const ie=j=>{if(j.method==="reconnect"&&P===h){m==="open"&&i?.(),S();for(const k of Object.values(a))k.type==="subscription"&&It(k)}},ot=j=>{const k=j.id!==null&&a[j.id];if(k){if(k.callbacks.next?.(j),k.ws!==h&&P===h){const V=k.ws;k.ws=h,A(V)}"result"in j&&j.result.type==="stopped"&&P===h&&k.callbacks.complete()}};return P.addEventListener("message",({data:j})=>{const k=JSON.parse(j);"method"in k?ie(k):ot(k),(P!==h||m==="closed")&&A(P)}),P.addEventListener("close",({code:j})=>{m==="open"&&i?.({code:j}),h===P&&E();for(const[k,V]of Object.entries(a))if(V.ws===P){if(m==="closed"){delete a[k],V.callbacks.complete?.();continue}V.type==="subscription"?It(V):(delete a[k],V.callbacks.error?.(Sr.TRPCClientError.from(new Ot("WebSocket closed prematurely"))))}}),P}function At(R,P){const{type:ie,input:ot,path:j,id:k}=R,V={id:k,method:ie,params:{input:ot,path:j}};return a[k]={ws:h,type:ie,callbacks:P,op:R},o.push(V),x(),()=>{const Qr=a[k]?.callbacks;delete a[k],o=o.filter(Xr=>Xr.id!==k),Qr?.complete?.(),h.readyState===r.OPEN&&R.type==="subscription"&&(o.push({id:k,method:"subscription.stop"}),x())}}return{close:()=>{m="closed",i?.(),B(),A(h),clearTimeout(l),l=null},request:At,getConnection(){return h}}}class Ot extends Error{constructor(e){super(e),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,Ot.prototype)}}function ms(t){return e=>{const{client:r}=t;return({op:n})=>ds.observable(s=>{const{type:i,path:o,id:a,context:c}=n,u=e.transformer.serialize(n.input),l=r.request({type:i,path:o,input:u,id:a,context:c},{error(h){s.error(h),l()},complete(){s.complete()},next(h){const m=fs.transformResult(h,e);if(!m.ok){s.error(Sr.TRPCClientError.from(m.error));return}s.next({result:m.result}),n.type!=="subscription"&&(l(),s.complete())}});return()=>{l()}})}}et.createWSClient=hs;et.wsLink=ms;Object.defineProperty(O,"__esModule",{value:!0});var Gt=he,Nr=kt,Lr=me,Yt=Vn,_e=z,Ir=Ct,Pt=Ke,ys=Rt,jr=et;class tt{$request({type:e,input:r,path:n,context:s={}}){return Nr.createChain({links:this.links,op:{id:++this.requestId,type:e,path:n,input:r,context:s}}).pipe(Gt.share())}requestAsPromise(e){const r=this.$request(e),{promise:n,abort:s}=Gt.observableToPromise(r);return new Promise((o,a)=>{e.signal?.addEventListener("abort",s),n.then(c=>{o(c.result.data)}).catch(c=>{a(Lr.TRPCClientError.from(c))})})}query(e,r,n){return this.requestAsPromise({type:"query",path:e,input:r,context:n?.context,signal:n?.signal})}mutation(e,r,n){return this.requestAsPromise({type:"mutation",path:e,input:r,context:n?.context,signal:n?.signal})}subscription(e,r,n){return this.$request({type:"subscription",path:e,input:r,context:n?.context}).subscribe({next(i){i.result.type==="started"?n.onStarted?.():i.result.type==="stopped"?n.onStopped?.():n.onData?.(i.result.data)},error(i){n.onError?.(i)},complete(){n.onComplete?.()}})}constructor(e){this.requestId=0;const r=(()=>{const n=e.transformer;return n?"input"in n?e.transformer:{input:n,output:n}:{input:{serialize:s=>s,deserialize:s=>s},output:{serialize:s=>s,deserialize:s=>s}}})();this.runtime={transformer:{serialize:n=>r.input.serialize(n),deserialize:n=>r.output.deserialize(n)},combinedTransformer:r},this.links=e.links.map(n=>n(this.runtime))}}function gs(t){return new tt(t)}function _s(t){return new tt(t)}const bs={query:"query",mutate:"mutation",subscribe:"subscription"},Ar=t=>bs[t];function Mr(t){return Yt.createFlatProxy(e=>t.hasOwnProperty(e)?t[e]:e==="__untypedClient"?t:Yt.createRecursiveProxy(({path:r,args:n})=>{const s=[e,...r],i=Ar(s.pop()),o=s.join(".");return t[i](o,...n)}))}function vs(t){const e=new tt(t);return Mr(e)}function ws(t){return t.__untypedClient}function xs(t){if(t)return t;if(typeof window<"u"&&window.TextDecoder)return new window.TextDecoder;if(typeof globalThis<"u"&&globalThis.TextDecoder)return new globalThis.TextDecoder;throw new Error("No TextDecoder implementation found")}async function Ts(t){const e=t.parse??JSON.parse,r=n=>{if(t.signal?.aborted||!n||n==="}")return;const s=n.indexOf(":"),i=n.substring(2,s-1),o=n.substring(s+1);t.onSingle(Number(i),e(o))};await Es(t.readableStream,r,t.textDecoder)}async function Es(t,e,r){let n="";const s=i=>{const a=r.decode(i).split(`
`);if(a.length===1)n+=a[0];else if(a.length>1){e(n+a[0]);for(let c=1;c<a.length-1;c++)e(a[c]);n=a[a.length-1]}};"getReader"in t?await Cs(t,s):await ks(t,s),e(n)}function ks(t,e){return new Promise(r=>{t.on("data",e),t.on("end",r)})}async function Cs(t,e){const r=t.getReader();let n=await r.read();for(;!n.done;)e(n.value),n=await r.read()}const Rs=(t,e)=>{const r=t.AbortController?new t.AbortController:null,n=_e.fetchHTTPResponse({...t,contentTypeHeader:"application/json",batchModeHeader:"stream",getUrl:_e.getUrl,getBody:_e.getBody},r),s=()=>r?.abort(),i=n.then(async o=>{if(!o.body)throw new Error("Received response without body");const a={response:o};return Ts({readableStream:o.body,onSingle:e,parse:c=>({json:JSON.parse(c),meta:a}),signal:r?.signal,textDecoder:t.textDecoder})});return{cancel:s,promise:i}},Os=t=>{const e=xs(t.opts.textDecoder);return(r,n)=>{const s=r.map(c=>c.path).join(","),i=r.map(c=>c.input),{cancel:o,promise:a}=Rs({...t,textDecoder:e,path:s,inputs:i,headers(){return t.opts.headers?typeof t.opts.headers=="function"?t.opts.headers({opList:r}):t.opts.headers:{}}},(c,u)=>{n(c,u)});return{promise:a.then(()=>[]),cancel:o}}},Ps=Ir.createHTTPBatchLink(Os),Ss=t=>{if("input"in t){if(!(t.input instanceof FormData))throw new Error("Input is not FormData");return t.input}},Ns=t=>{if(t.type!=="mutation")throw new Error("We only handle mutations with formdata");return _e.httpRequest({...t,getUrl(){return`${t.url}/${t.path}`},getBody:Ss})},Ls=Pt.httpLinkFactory({requester:Ns});O.splitLink=Nr.splitLink;O.TRPCClientError=Lr.TRPCClientError;O.getFetch=_e.getFetch;O.httpBatchLink=Ir.httpBatchLink;O.httpLink=Pt.httpLink;O.httpLinkFactory=Pt.httpLinkFactory;O.loggerLink=ys.loggerLink;O.createWSClient=jr.createWSClient;O.wsLink=jr.wsLink;O.TRPCUntypedClient=tt;O.clientCallTypeToProcedureType=Ar;O.createTRPCClient=_s;O.createTRPCClientProxy=Mr;O.createTRPCProxyClient=vs;O.createTRPCUntypedClient=gs;O.experimental_formDataLink=Ls;O.getUntypedClient=ws;O.unstable_httpBatchStreamLink=Ps;var K={},St={};function Is(t){return t}function js(t){return t.length===0?Is:t.length===1?t[0]:function(r){return t.reduce((n,s)=>s(n),r)}}function As(t){return typeof t=="object"&&t!==null&&"subscribe"in t}function Ms(t){const e={subscribe(r){let n=null,s=!1,i=!1,o=!1;function a(){if(n===null){o=!0;return}i||(i=!0,typeof n=="function"?n():n&&n.unsubscribe())}return n=t({next(c){s||r.next?.(c)},error(c){s||(s=!0,r.error?.(c),a())},complete(){s||(s=!0,r.complete?.(),a())}}),o&&a(),{unsubscribe:a}},pipe(...r){return js(r)(e)}};return e}St.isObservable=As;St.observable=Ms;Object.defineProperty(K,"__esModule",{value:!0});var $r=St;function $s(t){return e=>{let r=0,n=null;const s=[];function i(){n||(n=e.subscribe({next(a){for(const c of s)c.next?.(a)},error(a){for(const c of s)c.error?.(a)},complete(){for(const a of s)a.complete?.()}}))}function o(){if(r===0&&n){const a=n;n=null,a.unsubscribe()}}return{subscribe(a){return r++,s.push(a),i(),{unsubscribe(){r--,o();const c=s.findIndex(u=>u===a);c>-1&&s.splice(c,1)}}}}}}function Ds(t){return e=>({subscribe(r){let n=0;return e.subscribe({next(i){r.next?.(t(i,n++))},error(i){r.error?.(i)},complete(){r.complete?.()}})}})}function Zs(t){return e=>({subscribe(r){return e.subscribe({next(n){t.next?.(n),r.next?.(n)},error(n){t.error?.(n),r.error?.(n)},complete(){t.complete?.(),r.complete?.()}})}})}class Nt extends Error{constructor(e){super(e),this.name="ObservableAbortError",Object.setPrototypeOf(this,Nt.prototype)}}function Us(t){let e;return{promise:new Promise((n,s)=>{let i=!1;function o(){i||(i=!0,s(new Nt("This operation was aborted.")),a.unsubscribe())}const a=t.subscribe({next(c){i=!0,n(c),o()},error(c){i=!0,s(c),o()},complete(){i=!0,o()}});e=o}),abort:e}}K.isObservable=$r.isObservable;K.observable=$r.observable;K.map=Ds;K.observableToPromise=Us;K.share=$s;K.tap=Zs;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.isTRPCRequestWithId=U.isTRPCRequest=U.isTRPCResponse=U.isTRPCMessage=void 0;function Qt(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Ws(t){return t==null}function Dr(t){return!!(Qt(t)&&"trpc"in t&&Qt(t.trpc))}U.isTRPCMessage=Dr;function Lt(t){return Dr(t)&&"id"in t.trpc&&!Ws(t.trpc.id)}function qs(t){return Lt(t)&&("error"in t.trpc||"result"in t.trpc)}U.isTRPCResponse=qs;function Zr(t){return Lt(t)&&"method"in t.trpc}U.isTRPCRequest=Zr;function zs(t){return Zr(t)&&Lt(t)}U.isTRPCRequestWithId=zs;Object.defineProperty(pe,"__esModule",{value:!0});pe.createBaseLink=void 0;const ht=O,Bs=K,Vs=U,Hs=t=>e=>({op:r})=>(0,Bs.observable)(n=>{const s=[],{id:i,type:o,path:a}=r;try{const c=e.transformer.serialize(r.input),u=()=>{n.error(new ht.TRPCClientError("Port disconnected prematurely"))};t.addCloseListener(u),s.push(()=>t.removeCloseListener(u));const l=h=>{if(!(0,Vs.isTRPCResponse)(h))return;const{trpc:m}=h;if(i===m.id){if("error"in m){const x=e.transformer.deserialize(m.error);n.error(ht.TRPCClientError.from(Object.assign(Object.assign({},m),{error:x})));return}n.next({result:Object.assign(Object.assign({},m.result),(!m.result.type||m.result.type==="data")&&{type:"data",data:e.transformer.deserialize(m.result.data)})}),(o!=="subscription"||m.result.type==="stopped")&&n.complete()}};t.addMessageListener(l),s.push(()=>t.removeMessageListener(l)),t.postMessage({trpc:{id:i,jsonrpc:void 0,method:o,params:{path:a,input:c}}})}catch(c){n.error(new ht.TRPCClientError(c instanceof Error?c.message:"Unknown error"))}return()=>{o==="subscription"&&t.postMessage({trpc:{id:i,jsonrpc:void 0,method:"subscription.stop"}}),s.forEach(c=>c())}});pe.createBaseLink=Hs;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.chromeLink=void 0;const Fs=pe,Js=t=>(0,Fs.createBaseLink)({postMessage(e){t.port.postMessage(e)},addMessageListener(e){t.port.onMessage.addListener(e)},removeMessageListener(e){t.port.onMessage.removeListener(e)},addCloseListener(e){t.port.onDisconnect.addListener(e)},removeCloseListener(e){t.port.onDisconnect.removeListener(e)}});Qe.chromeLink=Js;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.windowLink=void 0;const Gs=pe,Ys=t=>{var e;const r=new Map,n=t.window,s=(e=t.postWindow)!==null&&e!==void 0?e:n;return(0,Gs.createBaseLink)({postMessage(i){s.postMessage(i,{targetOrigin:t.postOrigin})},addMessageListener(i){const o=a=>{i(a.data)};r.set(i,o),n.addEventListener("message",o)},removeMessageListener(i){const o=r.get(i);o&&n.removeEventListener("message",o)},addCloseListener(i){n.addEventListener("beforeunload",i)},removeCloseListener(i){n.removeEventListener("beforeunload",i)}})};rt.windowLink=Ys;var nt={},st={};Object.defineProperty(st,"__esModule",{value:!0});st.TRPC_BROWSER_LOADED_EVENT=void 0;st.TRPC_BROWSER_LOADED_EVENT="TRPC_BROWSER::POPUP_LOADED";Object.defineProperty(nt,"__esModule",{value:!0});nt.popupLink=void 0;const Qs=st,Xs=pe,Ks=t=>{const e=new Map,r=new Set;let n=null;async function s(i){if(!n||n.closed){n=t.createPopup(),await Promise.race([new Promise(o=>{var a;try{(a=n?.addEventListener)===null||a===void 0||a.call(n,"load",o)}catch{}}),new Promise(o=>{i.addEventListener("message",a=>{a.data===Qs.TRPC_BROWSER_LOADED_EVENT&&o()})}),new Promise(o=>{console.warn("Could not detect if popup loading succeeded after 15s timeout, continuing anyway"),setTimeout(o,15e3)})]);try{if(!n.addEventListener)throw new Error("popupWindow.addEventListener is not a function");n.addEventListener("beforeunload",()=>{n=null})}catch{const a=setInterval(()=>{n&&n.closed&&(n=null,r.forEach(c=>{c()}),clearInterval(a))},1e3)}}return n}return(0,Xs.createBaseLink)({async postMessage(i){return(await s(t.listenWindow)).postMessage(i,{targetOrigin:t.postOrigin})},addMessageListener(i){const o=a=>{i(a.data)};e.set(i,o),t.listenWindow.addEventListener("message",o)},removeMessageListener(i){const o=e.get(i);o&&t.listenWindow.removeEventListener("message",o)},addCloseListener(i){t.listenWindow.addEventListener("beforeunload",i),r.add(i)},removeCloseListener(i){t.listenWindow.removeEventListener("beforeunload",i),r.delete(i)}})};nt.popupLink=Ks;(function(t){var e=N.commonjsGlobal&&N.commonjsGlobal.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=N.commonjsGlobal&&N.commonjsGlobal.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qe,t),r(rt,t),r(nt,t)})(mt);var T;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(T||(T={}));const p=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Y=t=>{switch(typeof t){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(t)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(t)?p.array:t===null?p.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?p.promise:typeof Map<"u"&&t instanceof Map?p.map:typeof Set<"u"&&t instanceof Set?p.set:typeof Date<"u"&&t instanceof Date?p.date:p.object;default:return p.unknown}},d=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ei=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class H extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}H.create=t=>new H(t);const ve=(t,e)=>{let r;switch(t.code){case d.invalid_type:t.received===p.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case d.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,T.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:r=`Unrecognized key(s) in object: ${T.joinValues(t.keys,", ")}`;break;case d.invalid_union:r="Invalid input";break;case d.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${T.joinValues(t.options)}`;break;case d.invalid_enum_value:r=`Invalid enum value. Expected ${T.joinValues(t.options)}, received '${t.received}'`;break;case d.invalid_arguments:r="Invalid function arguments";break;case d.invalid_return_type:r="Invalid function return type";break;case d.invalid_date:r="Invalid date";break;case d.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:T.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case d.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(t.minimum)}`:r="Invalid input";break;case d.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(t.maximum)}`:r="Invalid input";break;case d.custom:r="Invalid input";break;case d.invalid_intersection_types:r="Intersection results could not be merged";break;case d.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case d.not_finite:r="Number must be finite";break;default:r=e.defaultError,T.assertNever(t)}return{message:r}};let Ur=ve;function ti(t){Ur=t}function Ze(){return Ur}const Ue=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},ri=[];function y(t,e){const r=Ue({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ze(),ve].filter(n=>!!n)});t.common.issues.push(r)}class I{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return _;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return I.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return _;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const _=Object.freeze({status:"aborted"}),Wr=t=>({status:"dirty",value:t}),L=t=>({status:"valid",value:t}),gt=t=>t.status==="aborted",_t=t=>t.status==="dirty",We=t=>t.status==="valid",qe=t=>typeof Promise<"u"&&t instanceof Promise;var w;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(w||(w={}));class W{constructor(e,r,n,s){this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._path.concat(this._key)}}const Xt=(t,e)=>{if(We(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new H(t.common.issues)}};function b(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class v{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Y(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Y(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new I,ctx:{common:e.parent.common,data:e.data,parsedType:Y(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(qe(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Y(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Xt(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Y(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(qe(s)?s:Promise.resolve(s));return Xt(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:d.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Z({schema:this,typeName:g.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return F.create(this,this._def)}nullable(){return ne.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return D.create(this,this._def)}promise(){return fe.create(this,this._def)}or(e){return ke.create([this,e],this._def)}and(e){return Ce.create(this,e,this._def)}transform(e){return new Z({...b(this._def),schema:this,typeName:g.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ne({...b(this._def),innerType:this,defaultValue:r,typeName:g.ZodDefault})}brand(){return new zr({typeName:g.ZodBranded,type:this,...b(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Fe({...b(this._def),innerType:this,catchValue:r,typeName:g.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Le.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ni=/^c[^\s-]{8,}$/i,si=/^[a-z][a-z0-9]*$/,ii=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,oi=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|([^-]([a-zA-Z0-9-]*\.)+[a-zA-Z]{2,}))$/,ai=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class J extends v{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(s=>e.test(s),{validation:r,code:d.invalid_string,...w.errToObj(n)}),this.nonempty=e=>this.min(1,w.errToObj(e)),this.trim=()=>new J({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const i=this._getOrReturnCtx(e);return y(i,{code:d.invalid_type,expected:p.string,received:i.parsedType}),_}const n=new I;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:d.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:d.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?y(s,{code:d.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&y(s,{code:d.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")oi.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"email",code:d.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")ii.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"uuid",code:d.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ni.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid",code:d.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")si.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid2",code:d.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),y(s,{validation:"url",code:d.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"regex",code:d.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),y(s,{code:d.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),y(s,{code:d.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ai(i).test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:d.invalid_string,validation:"datetime",message:i.message}),n.dirty()):T.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...w.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...w.errToObj(r)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...w.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...w.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...w.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}J.create=t=>{var e;return new J({checks:[],typeName:g.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...b(t)})};function ci(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Q extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const i=this._getOrReturnCtx(e);return y(i,{code:d.invalid_type,expected:p.number,received:i.parsedType}),_}let n;const s=new I;for(const i of this._def.checks)i.kind==="int"?T.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:d.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:d.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:d.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?ci(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),y(n,{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:d.not_finite,message:i.message}),s.dirty()):T.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,w.toString(r))}gt(e,r){return this.setLimit("min",e,!1,w.toString(r))}lte(e,r){return this.setLimit("max",e,!0,w.toString(r))}lt(e,r){return this.setLimit("max",e,!1,w.toString(r))}setLimit(e,r,n,s){return new Q({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:w.toString(s)}]})}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&T.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Q.create=t=>new Q({checks:[],typeName:g.ZodNumber,coerce:t?.coerce||!1,...b(t)});class we extends v{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==p.bigint){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.bigint,received:n.parsedType}),_}return L(e.data)}}we.create=t=>{var e;return new we({typeName:g.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...b(t)})};class xe extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.boolean,received:n.parsedType}),_}return L(e.data)}}xe.create=t=>new xe({typeName:g.ZodBoolean,coerce:t?.coerce||!1,...b(t)});class te extends v{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const i=this._getOrReturnCtx(e);return y(i,{code:d.invalid_type,expected:p.date,received:i.parsedType}),_}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return y(i,{code:d.invalid_date}),_}const n=new I;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:d.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:d.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):T.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}te.create=t=>new te({checks:[],coerce:t?.coerce||!1,typeName:g.ZodDate,...b(t)});class ze extends v{_parse(e){if(this._getType(e)!==p.symbol){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.symbol,received:n.parsedType}),_}return L(e.data)}}ze.create=t=>new ze({typeName:g.ZodSymbol,...b(t)});class Te extends v{_parse(e){if(this._getType(e)!==p.undefined){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.undefined,received:n.parsedType}),_}return L(e.data)}}Te.create=t=>new Te({typeName:g.ZodUndefined,...b(t)});class Ee extends v{_parse(e){if(this._getType(e)!==p.null){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.null,received:n.parsedType}),_}return L(e.data)}}Ee.create=t=>new Ee({typeName:g.ZodNull,...b(t)});class de extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return L(e.data)}}de.create=t=>new de({typeName:g.ZodAny,...b(t)});class ee extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return L(e.data)}}ee.create=t=>new ee({typeName:g.ZodUnknown,...b(t)});class G extends v{_parse(e){const r=this._getOrReturnCtx(e);return y(r,{code:d.invalid_type,expected:p.never,received:r.parsedType}),_}}G.create=t=>new G({typeName:g.ZodNever,...b(t)});class Be extends v{_parse(e){if(this._getType(e)!==p.undefined){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.void,received:n.parsedType}),_}return L(e.data)}}Be.create=t=>new Be({typeName:g.ZodVoid,...b(t)});class D extends v{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==p.array)return y(r,{code:d.invalid_type,expected:p.array,received:r.parsedType}),_;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(y(r,{code:o?d.too_big:d.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(y(r,{code:d.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(y(r,{code:d.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new W(r,o,r.path,a)))).then(o=>I.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new W(r,o,r.path,a)));return I.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new D({...this._def,minLength:{value:e,message:w.toString(r)}})}max(e,r){return new D({...this._def,maxLength:{value:e,message:w.toString(r)}})}length(e,r){return new D({...this._def,exactLength:{value:e,message:w.toString(r)}})}nonempty(e){return this.min(1,e)}}D.create=(t,e)=>new D({type:t,minLength:null,maxLength:null,exactLength:null,typeName:g.ZodArray,...b(e)});var Ve;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ve||(Ve={}));function ce(t){if(t instanceof C){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=F.create(ce(n))}return new C({...t._def,shape:()=>e})}else return t instanceof D?D.create(ce(t.element)):t instanceof F?F.create(ce(t.unwrap())):t instanceof ne?ne.create(ce(t.unwrap())):t instanceof q?q.create(t.items.map(e=>ce(e))):t}class C extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=T.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==p.object){const u=this._getOrReturnCtx(e);return y(u,{code:d.invalid_type,expected:p.object,received:u.parsedType}),_}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof G&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new W(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof G){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(y(s,{code:d.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const h=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new W(s,h,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const h=await l.key;u.push({key:h,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>I.mergeObjectSync(n,u)):I.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new C({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=w.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new C({...this._def,unknownKeys:"strip"})}passthrough(){return new C({...this._def,unknownKeys:"passthrough"})}extend(e){return new C({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new C({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Ve.mergeShapes(this._def.shape(),e._def.shape()),typeName:g.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new C({...this._def,catchall:e})}pick(e){const r={};return T.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new C({...this._def,shape:()=>r})}omit(e){const r={};return T.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new C({...this._def,shape:()=>r})}deepPartial(){return ce(this)}partial(e){const r={};return T.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new C({...this._def,shape:()=>r})}required(e){const r={};return T.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof F;)i=i._def.innerType;r[n]=i}}),new C({...this._def,shape:()=>r})}keyof(){return qr(T.objectKeys(this.shape))}}C.create=(t,e)=>new C({shape:()=>t,unknownKeys:"strip",catchall:G.create(),typeName:g.ZodObject,...b(e)});C.strictCreate=(t,e)=>new C({shape:()=>t,unknownKeys:"strict",catchall:G.create(),typeName:g.ZodObject,...b(e)});C.lazycreate=(t,e)=>new C({shape:t,unknownKeys:"strip",catchall:G.create(),typeName:g.ZodObject,...b(e)});class ke extends v{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new H(a.ctx.common.issues));return y(r,{code:d.invalid_union,unionErrors:o}),_}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new H(c));return y(r,{code:d.invalid_union,unionErrors:a}),_}}get options(){return this._def.options}}ke.create=(t,e)=>new ke({options:t,typeName:g.ZodUnion,...b(e)});const Me=t=>t instanceof Oe?Me(t.schema):t instanceof Z?Me(t.innerType()):t instanceof Pe?[t.value]:t instanceof X?t.options:t instanceof Se?Object.keys(t.enum):t instanceof Ne?Me(t._def.innerType):t instanceof Te?[void 0]:t instanceof Ee?[null]:null;class it extends v{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==p.object)return y(r,{code:d.invalid_type,expected:p.object,received:r.parsedType}),_;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(y(r,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=Me(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new it({typeName:g.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...b(n)})}}function bt(t,e){const r=Y(t),n=Y(e);if(t===e)return{valid:!0,data:t};if(r===p.object&&n===p.object){const s=T.objectKeys(e),i=T.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=bt(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===p.array&&n===p.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=bt(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===p.date&&n===p.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ce extends v{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(gt(i)||gt(o))return _;const a=bt(i.value,o.value);return a.valid?((_t(i)||_t(o))&&r.dirty(),{status:r.value,value:a.data}):(y(n,{code:d.invalid_intersection_types}),_)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ce.create=(t,e,r)=>new Ce({left:t,right:e,typeName:g.ZodIntersection,...b(r)});class q extends v{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.array)return y(n,{code:d.invalid_type,expected:p.array,received:n.parsedType}),_;if(n.data.length<this._def.items.length)return y(n,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;!this._def.rest&&n.data.length>this._def.items.length&&(y(n,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new W(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>I.mergeArray(r,o)):I.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new q({...this._def,rest:e})}}q.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new q({items:t,typeName:g.ZodTuple,rest:null,...b(e)})};class Re extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.object)return y(n,{code:d.invalid_type,expected:p.object,received:n.parsedType}),_;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new W(n,a,n.path,a)),value:o._parse(new W(n,n.data[a],n.path,a))});return n.common.async?I.mergeObjectAsync(r,s):I.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof v?new Re({keyType:e,valueType:r,typeName:g.ZodRecord,...b(n)}):new Re({keyType:J.create(),valueType:e,typeName:g.ZodRecord,...b(r)})}}class He extends v{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.map)return y(n,{code:d.invalid_type,expected:p.map,received:n.parsedType}),_;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new W(n,a,n.path,[u,"key"])),value:i._parse(new W(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return _;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return _;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}He.create=(t,e,r)=>new He({valueType:e,keyType:t,typeName:g.ZodMap,...b(r)});class re extends v{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.set)return y(n,{code:d.invalid_type,expected:p.set,received:n.parsedType}),_;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(y(n,{code:d.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(y(n,{code:d.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return _;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new W(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new re({...this._def,minSize:{value:e,message:w.toString(r)}})}max(e,r){return new re({...this._def,maxSize:{value:e,message:w.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}re.create=(t,e)=>new re({valueType:t,minSize:null,maxSize:null,typeName:g.ZodSet,...b(e)});class ue extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==p.function)return y(r,{code:d.invalid_type,expected:p.function,received:r.parsedType}),_;function n(a,c){return Ue({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ze(),ve].filter(u=>!!u),issueData:{code:d.invalid_arguments,argumentsError:c}})}function s(a,c){return Ue({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ze(),ve].filter(u=>!!u),issueData:{code:d.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof fe?L(async(...a)=>{const c=new H([]),u=await this._def.args.parseAsync(a,i).catch(m=>{throw c.addIssue(n(a,m)),c}),l=await o(...u);return await this._def.returns._def.type.parseAsync(l,i).catch(m=>{throw c.addIssue(s(l,m)),c})}):L((...a)=>{const c=this._def.args.safeParse(a,i);if(!c.success)throw new H([n(a,c.error)]);const u=o(...c.data),l=this._def.returns.safeParse(u,i);if(!l.success)throw new H([s(u,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ue({...this._def,args:q.create(e).rest(ee.create())})}returns(e){return new ue({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ue({args:e||q.create([]).rest(ee.create()),returns:r||ee.create(),typeName:g.ZodFunction,...b(n)})}}class Oe extends v{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Oe.create=(t,e)=>new Oe({getter:t,typeName:g.ZodLazy,...b(e)});class Pe extends v{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return y(r,{received:r.data,code:d.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}Pe.create=(t,e)=>new Pe({value:t,typeName:g.ZodLiteral,...b(e)});function qr(t,e){return new X({values:t,typeName:g.ZodEnum,...b(e)})}class X extends v{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return y(r,{expected:T.joinValues(n),received:r.parsedType,code:d.invalid_type}),_}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return y(r,{received:r.data,code:d.invalid_enum_value,options:n}),_}return L(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return X.create(e)}exclude(e){return X.create(this.options.filter(r=>!e.includes(r)))}}X.create=qr;class Se extends v{_parse(e){const r=T.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==p.string&&n.parsedType!==p.number){const s=T.objectValues(r);return y(n,{expected:T.joinValues(s),received:n.parsedType,code:d.invalid_type}),_}if(r.indexOf(e.data)===-1){const s=T.objectValues(r);return y(n,{received:n.data,code:d.invalid_enum_value,options:s}),_}return L(e.data)}get enum(){return this._def.values}}Se.create=(t,e)=>new Se({values:t,typeName:g.ZodNativeEnum,...b(e)});class fe extends v{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==p.promise&&r.common.async===!1)return y(r,{code:d.invalid_type,expected:p.promise,received:r.parsedType}),_;const n=r.parsedType===p.promise?r.data:Promise.resolve(r.data);return L(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}fe.create=(t,e)=>new fe({type:t,typeName:g.ZodPromise,...b(e)});class Z extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===g.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const o=s.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const i={addIssue:o=>{y(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?_:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?_:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!We(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>We(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);T.assertNever(s)}}Z.create=(t,e,r)=>new Z({schema:t,typeName:g.ZodEffects,effect:e,...b(r)});Z.createWithPreprocess=(t,e,r)=>new Z({schema:e,effect:{type:"preprocess",transform:t},typeName:g.ZodEffects,...b(r)});class F extends v{_parse(e){return this._getType(e)===p.undefined?L(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}F.create=(t,e)=>new F({innerType:t,typeName:g.ZodOptional,...b(e)});class ne extends v{_parse(e){return this._getType(e)===p.null?L(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ne.create=(t,e)=>new ne({innerType:t,typeName:g.ZodNullable,...b(e)});class Ne extends v{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===p.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ne.create=(t,e)=>new Ne({innerType:t,typeName:g.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...b(e)});class Fe extends v{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r,common:{...r.common,issues:[]}}});return qe(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue()})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue()}}removeCatch(){return this._def.innerType}}Fe.create=(t,e)=>new Fe({innerType:t,typeName:g.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...b(e)});class Je extends v{_parse(e){if(this._getType(e)!==p.nan){const n=this._getOrReturnCtx(e);return y(n,{code:d.invalid_type,expected:p.nan,received:n.parsedType}),_}return{status:"valid",value:e.data}}}Je.create=t=>new Je({typeName:g.ZodNaN,...b(t)});const ui=Symbol("zod_brand");class zr extends v{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Le extends v{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_:i.status==="dirty"?(r.dirty(),Wr(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?_:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Le({in:e,out:r,typeName:g.ZodPipeline})}}const Br=(t,e={},r)=>t?de.create().superRefine((n,s)=>{if(!t(n)){const i=typeof e=="function"?e(n):e,o=typeof i=="string"?{message:i}:i;s.addIssue({code:"custom",...o,fatal:r})}}):de.create(),li={object:C.lazycreate};var g;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(g||(g={}));const di=(t,e={message:`Input not instance of ${t.name}`})=>Br(r=>r instanceof t,e,!0),Vr=J.create,Hr=Q.create,fi=Je.create,pi=we.create,Fr=xe.create,hi=te.create,mi=ze.create,yi=Te.create,gi=Ee.create,_i=de.create,bi=ee.create,vi=G.create,wi=Be.create,xi=D.create,Ti=C.create,Ei=C.strictCreate,ki=ke.create,Ci=it.create,Ri=Ce.create,Oi=q.create,Pi=Re.create,Si=He.create,Ni=re.create,Li=ue.create,Ii=Oe.create,ji=Pe.create,Ai=X.create,Mi=Se.create,$i=fe.create,Kt=Z.create,Di=F.create,Zi=ne.create,Ui=Z.createWithPreprocess,Wi=Le.create,qi=()=>Vr().optional(),zi=()=>Hr().optional(),Bi=()=>Fr().optional(),Vi={string:t=>J.create({...t,coerce:!0}),number:t=>Q.create({...t,coerce:!0}),boolean:t=>xe.create({...t,coerce:!0}),bigint:t=>we.create({...t,coerce:!0}),date:t=>te.create({...t,coerce:!0})},Hi=_;var f=Object.freeze({__proto__:null,defaultErrorMap:ve,setErrorMap:ti,getErrorMap:Ze,makeIssue:Ue,EMPTY_PATH:ri,addIssueToContext:y,ParseStatus:I,INVALID:_,DIRTY:Wr,OK:L,isAborted:gt,isDirty:_t,isValid:We,isAsync:qe,get util(){return T},ZodParsedType:p,getParsedType:Y,ZodType:v,ZodString:J,ZodNumber:Q,ZodBigInt:we,ZodBoolean:xe,ZodDate:te,ZodSymbol:ze,ZodUndefined:Te,ZodNull:Ee,ZodAny:de,ZodUnknown:ee,ZodNever:G,ZodVoid:Be,ZodArray:D,get objectUtil(){return Ve},ZodObject:C,ZodUnion:ke,ZodDiscriminatedUnion:it,ZodIntersection:Ce,ZodTuple:q,ZodRecord:Re,ZodMap:He,ZodSet:re,ZodFunction:ue,ZodLazy:Oe,ZodLiteral:Pe,ZodEnum:X,ZodNativeEnum:Se,ZodPromise:fe,ZodEffects:Z,ZodTransformer:Z,ZodOptional:F,ZodNullable:ne,ZodDefault:Ne,ZodCatch:Fe,ZodNaN:Je,BRAND:ui,ZodBranded:zr,ZodPipeline:Le,custom:Br,Schema:v,ZodSchema:v,late:li,get ZodFirstPartyTypeKind(){return g},coerce:Vi,any:_i,array:xi,bigint:pi,boolean:Fr,date:hi,discriminatedUnion:Ci,effect:Kt,enum:Ai,function:Li,instanceof:di,intersection:Ri,lazy:Ii,literal:ji,map:Si,nan:fi,nativeEnum:Mi,never:vi,null:gi,nullable:Zi,number:Hr,object:Ti,oboolean:Bi,onumber:zi,optional:Di,ostring:qi,pipeline:Wi,preprocess:Ui,promise:$i,record:Pi,set:Ni,strictObject:Ei,string:Vr,symbol:mi,transformer:Kt,tuple:Oi,undefined:yi,union:ki,unknown:bi,void:wi,NEVER:Hi,ZodIssueCode:d,quotelessJson:ei,ZodError:H});const Jr=/^0x[0-9a-f]+$/i,Gr=/^\d+$/,Fi=f.string().nonempty("The short string cannot be empty").max(31,"The short string cannot exceed 31 characters").refine(t=>!Jr.test(t),"The shortString should not be a hex string").refine(t=>!Gr.test(t),"The shortString should not be an integer string"),$e=f.union([f.string().regex(Jr,"Only hex, integers and bigint are supported in calldata"),f.string().regex(Gr,"Only hex, integers and bigint are supported in calldata"),Fi,f.number().int("Only hex, integers and bigint are supported in calldata"),f.bigint()]),er=f.object({contractAddress:f.string(),entrypoint:f.string(),calldata:f.array($e).optional()}),Ji=f.object({types:f.record(f.array(f.union([f.object({name:f.string(),type:f.string()}),f.object({name:f.string(),type:f.literal("merkletree"),contains:f.string()})]))),primaryType:f.string(),domain:f.record(f.unknown()),message:f.record(f.unknown())}),tr={enable:f.tuple([f.object({starknetVersion:f.union([f.literal("v4"),f.literal("v5")]).optional()}).optional()]).or(f.tuple([])),addStarknetChain:f.tuple([f.object({id:f.string(),chainId:f.string(),chainName:f.string(),rpcUrls:f.array(f.string()).optional(),nativeCurrency:f.object({name:f.string(),symbol:f.string(),decimals:f.number()}).optional(),blockExplorerUrls:f.array(f.string()).optional()})]),switchStarknetChain:f.tuple([f.object({chainId:f.string()})]),watchAsset:f.tuple([f.object({type:f.literal("ERC20"),options:f.object({address:f.string(),symbol:f.string().optional(),decimals:f.number().optional(),image:f.string().optional(),name:f.string().optional()})})]),execute:f.tuple([f.array(er).nonempty().or(er),f.array(f.any()).optional(),f.object({nonce:$e.optional(),maxFee:$e.optional(),version:$e.optional()}).optional()]),signMessage:f.tuple([Ji])},$=Wn.create({isServer:!1,allowOutsideOfServer:!0});let vt=xt,wt="",Yr="";const be=({width:t=775,height:e=385,origin:r,location:n,atLeftBottom:s=!1})=>{const i=window?.outerWidth??window?.innerWidth??window?.screen.width??0,o=window?.outerHeight??window?.innerHeight??window?.screen.height??0,a=window?.screenLeft??window?.screenX??0,c=window?.screenTop??window?.screenY??0,u=s?0:a+i/2-t/2,l=s?window.screen.availHeight+10:c+o/2-e/2;vt=r??vt,wt=n??wt,Yr=`width=${t},height=${e},top=${l},left=${u},toolbar=no,menubar=no,scrollbars=no,location=no,status=no,popup=1`};$.router({authorize:$.procedure.output(f.boolean()).mutation(async()=>!0),connect:$.procedure.mutation(async()=>""),enable:$.procedure.output(f.string()).mutation(async()=>""),execute:$.procedure.input(tr.execute).output(f.string()).mutation(async()=>""),signMessage:$.procedure.input(tr.signMessage).output(f.string().array()).mutation(async()=>[]),getLoginStatus:$.procedure.output(f.object({isLoggedIn:f.boolean(),hasSession:f.boolean().optional(),isPreauthorized:f.boolean().optional()})).mutation(async()=>({isLoggedIn:!0})),addStarknetChain:$.procedure.mutation(t=>{throw Error("not implemented")}),switchStarknetChain:$.procedure.mutation(t=>{throw Error("not implemented")}),watchAsset:$.procedure.mutation(t=>{throw Error("not implemented")}),updateModal:$.procedure.subscription(async()=>{})});const Gi=({iframe:t})=>Tn({links:[_n({enabled:e=>process.env.NODE_ENV==="development"&&typeof window<"u"||process.env.NODE_ENV==="development"&&e.direction==="down"&&e.result instanceof Error}),cn({condition(e){if(!t&&e.type==="subscription")throw new Error("subscription is not supported without an iframe window");return!!t},true:mt.windowLink({window,postWindow:t,postOrigin:"*"}),false:mt.popupLink({listenWindow:window,createPopup:()=>{let e=null;const r=document.createElement("button");if(r.style.display="none",r.addEventListener("click",()=>{e=window.open(`${vt}${wt}`,"popup",Yr)}),r.click(),(async()=>{for(;!e;)await new Promise(n=>setTimeout(n,100))})(),!e)throw new Error("Could not open popup");return e},postOrigin:"*"})})]});function Yi(t){try{const{origin:e}=new URL(t);if(e.includes("localhost")||e.includes("127.0.0.1")||e.includes("hydrogen"))return $t;if(e.includes("staging")||e.includes("argent.xyz"))return at}catch{console.warn("Could not determine rpc nodeUrl from target URL, defaulting to mainnet")}return at}const Qi=385,Xi=775,Ki=385,eo=440,to=886,ro=562;class rr{async getPubKey(){throw new Error("Method not implemented")}async signMessage(){throw new Error("Method not implemented")}async signTransaction(){throw new Error("Method not implemented")}async signDeclareTransaction(){throw new Error("Method not implemented")}async signDeployAccountTransaction(){throw new Error("Method not implemented")}}class no extends nr.Account{constructor(r,n,s){super(r,n,new rr);oe(this,"signer",new rr);oe(this,"execute",async(r,n,s)=>{try{return be({width:Qi,height:Xi,location:"/review"}),Array.isArray(r)&&r[0]&&r[0].entrypoint==="use_offchain_session"&&be({width:1,height:1,location:"/executeSessionTx",atLeftBottom:!0}),{transaction_hash:await this.proxyLink.execute.mutate([r,n,s])}}catch(i){throw i instanceof Error?new Error(i.message):new Error("Error while execute a transaction")}});oe(this,"signMessage",async r=>{try{return be({width:Ki,height:eo,location:"/signMessage"}),await this.proxyLink.signMessage.mutate([r])}catch(n){throw n instanceof Error?new Error(n.message):new Error("Error while sign a message")}});this.address=n,this.proxyLink=s}}const Ie=[],so=(t,e,r)=>{const n={...t,isConnected:!1,provider:e,getLoginStatus:()=>r.getLoginStatus.mutate(),async request(s){switch(s.type){case"wallet_addStarknetChain":return await r.addStarknetChain.mutate();case"wallet_switchStarknetChain":return await r.switchStarknetChain.mutate();case"wallet_watchAsset":return await r.watchAsset.mutate();default:throw new Error("not implemented")}},async enable(s){if(s?.starknetVersion!=="v4")throw Error("not implemented");try{be({width:to,height:ro,location:"/interstitialLogin"});const o=await r.enable.mutate();return await io(n,e,r,o),[o]}catch(i){throw i instanceof Error?new Error(i.message):new Error("Unknow error on enable wallet")}},async isPreauthorized(){const{isLoggedIn:s,isPreauthorized:i}=await r.getLoginStatus.mutate();return!!(s&&i)},on:(s,i)=>{if(s==="accountsChanged")Ie.push({type:s,handler:i});else if(s==="networkChanged")Ie.push({type:s,handler:i});else throw new Error(`Unknwown event: ${s}`)},off:(s,i)=>{if(s!=="accountsChanged"&&s!=="networkChanged")throw new Error(`Unknwown event: ${s}`);const o=Ie.findIndex(a=>a.type===s&&a.handler===i);o>=0&&Ie.splice(o,1)}};return n};async function io(t,e,r,n){if(t.isConnected)return t;const i={isConnected:!0,chainId:await e.getChainId(),selectedAddress:n,account:new no(e,n,r),provider:e};return Object.assign(t,i)}const oo=async(t,e)=>{const r=typeof window<"u"?window:void 0;if(!r)throw new Error("window is not defined");const n=Yi(t),s=new nr.RpcProvider({nodeUrl:n});return so({host:r.location.origin,id:"argentWebWallet",icon:"https://www.argent.xyz/favicon.ico",name:"Argent Web Wallet",version:"1.0.0"},s,e)};let M=null;class ao extends N.Connector{constructor(r={}){super();oe(this,"_wallet",null);oe(this,"_options");this._options=r}available(){return!0}async ready(){return M?(this._wallet=M,this._wallet.isPreauthorized()):(this._wallet=null,!1)}get id(){return this._wallet=M,this._wallet?.id||"argentWebWallet"}get name(){return this._wallet=M,this._wallet?.name||"Argent Web Wallet"}get icon(){return{light:Mt,dark:Mt}}get wallet(){if(!this._wallet)throw new N.ConnectorNotConnectedError;return this._wallet}get title(){return"Email"}get subtitle(){return"Powered by Argent"}async connect(){if(await this.ensureWallet(),!this._wallet)throw new N.ConnectorNotFoundError;try{await this._wallet.enable({starknetVersion:"v4"})}catch{throw new N.UserRejectedRequestError}if(!this._wallet.isConnected)throw new N.UserRejectedRequestError;const r=this._wallet.account,n=await this.chainId();return{account:r.address,chainId:n}}async disconnect(){if(!this.available()&&!this._wallet)throw new N.ConnectorNotFoundError;if(!this._wallet?.isConnected)throw new N.UserNotConnectedError;M=null,this._wallet=M}async account(){if(this._wallet=M,!this._wallet||!this._wallet.account)throw new N.ConnectorNotConnectedError;return this._wallet.account}async chainId(){if(!this._wallet||!this.wallet.account||!this._wallet.provider)throw new N.ConnectorNotConnectedError;const r=await this._wallet.provider.getChainId();return BigInt(r)}async initEventListener(r){if(this._wallet=M,!this._wallet)throw new N.ConnectorNotConnectedError;this._wallet.on("accountsChanged",r)}async removeEventListener(r){if(this._wallet=M,!this._wallet)throw new N.ConnectorNotConnectedError;this._wallet.off("accountsChanged",r),M=null,this._wallet=null}async ensureWallet(){const r=this._options.url||xt;be({origin:r,location:"/interstitialLogin"}),M=await oo(r,Gi({}))??null,this._wallet=M}}exports.DEFAULT_WEBWALLET_URL=xt;exports.WebWalletConnector=ao;
