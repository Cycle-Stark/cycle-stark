"use strict";var s=Object.defineProperty;var o=(M,i,t)=>i in M?s(M,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):M[i]=t;var N=(M,i,t)=>(o(M,typeof i!="symbol"?i+"":i,t),t);const I=require("starknet"),n=require("./connector-14f8958c.cjs"),r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTE4LjQwMTggNy41NTU1NkgxMy41OTgyQzEzLjQzNzcgNy41NTU1NiAxMy4zMDkxIDcuNjg3NDcgMTMuMzA1NiA3Ljg1MTQzQzEzLjIwODUgMTIuNDYwMyAxMC44NDg0IDE2LjgzNDcgNi43ODYwOCAxOS45MzMxQzYuNjU3MTEgMjAuMDMxNCA2LjYyNzczIDIwLjIxNjIgNi43MjIwMiAyMC4zNDkzTDkuNTMyNTMgMjQuMzE5NkM5LjYyODE1IDI0LjQ1NDggOS44MTQ0NCAyNC40ODUzIDkuOTQ1NTggMjQuMzg2QzEyLjQ4NTYgMjIuNDYxMyAxNC41Mjg3IDIwLjEzOTUgMTYgMTcuNTY2QzE3LjQ3MTMgMjAuMTM5NSAxOS41MTQ1IDIyLjQ2MTMgMjIuMDU0NSAyNC4zODZDMjIuMTg1NiAyNC40ODUzIDIyLjM3MTkgMjQuNDU0OCAyMi40Njc2IDI0LjMxOTZMMjUuMjc4MSAyMC4zNDkzQzI1LjM3MjMgMjAuMjE2MiAyNS4zNDI5IDIwLjAzMTQgMjUuMjE0IDE5LjkzMzFDMjEuMTUxNiAxNi44MzQ3IDE4Ljc5MTUgMTIuNDYwMyAxOC42OTQ2IDcuODUxNDNDMTguNjkxMSA3LjY4NzQ3IDE4LjU2MjMgNy41NTU1NiAxOC40MDE4IDcuNTU1NTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjQuNzIzNiAxMC40OTJMMjQuMjIzMSA4LjkyNDM5QzI0LjEyMTMgOC42MDYxNCAyMy44NzM0IDguMzU4MjQgMjMuNTU3NyA4LjI2MDIzTDIyLjAwMzkgNy43NzU5NUMyMS43ODk1IDcuNzA5MDYgMjEuNzg3MyA3LjQwMTc3IDIyLjAwMTEgNy4zMzIwMUwyMy41NDY5IDYuODI0NjZDMjMuODYwOSA2LjcyMTQ2IDI0LjEwNiA2LjQ2OTUyIDI0LjIwMjcgNi4xNTAxMUwyNC42Nzk4IDQuNTc1MDJDMjQuNzQ1OCA0LjM1NzA5IDI1LjA0ODkgNC4zNTQ3NyAyNS4xMTgzIDQuNTcxNTZMMjUuNjE4OCA2LjEzOTE1QzI1LjcyMDYgNi40NTc0IDI1Ljk2ODYgNi43MDUzMSAyNi4yODQyIDYuODAzOUwyNy44MzggNy4yODc2MUMyOC4wNTI0IDcuMzU0NSAyOC4wNTQ3IDcuNjYxNzkgMjcuODQwOCA3LjczMjEzTDI2LjI5NSA4LjIzOTQ4QzI1Ljk4MTEgOC4zNDIxIDI1LjczNiA4LjU5NDA0IDI1LjYzOTMgOC45MTQwMkwyNS4xNjIxIDEwLjQ4ODVDMjUuMDk2MSAxMC43MDY1IDI0Ljc5MyAxMC43MDg4IDI0LjcyMzYgMTAuNDkyWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",D="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iYmxhY2siPgogIDxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTkuODc5IDcuNTE5YzEuMTcxLTEuMDI1IDMuMDcxLTEuMDI1IDQuMjQyIDAgMS4xNzIgMS4wMjUgMS4xNzIgMi42ODcgMCAzLjcxMi0uMjAzLjE3OS0uNDMuMzI2LS42Ny40NDItLjc0NS4zNjEtMS40NS45OTktMS40NSAxLjgyN3YuNzVNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6bS05IDUuMjVoLjAwOHYuMDA4SDEydi0uMDA4eiIgLz4KPC9zdmc+",g="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0id2hpdGUiPgogIDxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTkuODc5IDcuNTE5YzEuMTcxLTEuMDI1IDMuMDcxLTEuMDI1IDQuMjQyIDAgMS4xNzIgMS4wMjUgMS4xNzIgMi42ODcgMCAzLjcxMi0uMjAzLjE3OS0uNDMuMzI2LS42Ny40NDItLjc0NS4zNjEtMS40NS45OTktMS40NSAxLjgyN3YuNzVNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6bS05IDUuMjVoLjAwOHYuMDA4SDEydi0uMDA4eiIgLz4KPC9zdmc+Cg==";class u extends n.Connector{constructor({options:t}){super();N(this,"_wallet");N(this,"_options");this._options=t}available(){return this.ensureWallet(),this._wallet!==void 0}async ready(){return this.ensureWallet(),this._wallet?await this._wallet.isPreauthorized():!1}async chainId(){if(this.ensureWallet(),!this._wallet)throw new n.ConnectorNotConnectedError;const t=await this._wallet.provider.getChainId();return BigInt(t)}async onAccountsChanged(t){let e;if(typeof t=="string"?e=t:e=t[0],e){const c=await this.chainId();this.emit("change",{account:e,chainId:c})}else this.emit("disconnect")}onNetworkChanged(t){switch(t){case"SN_MAIN":this.emit("change",{chainId:BigInt(I.constants.StarknetChainId.SN_MAIN)});break;case"SN_GOERLI":this.emit("change",{chainId:BigInt(I.constants.StarknetChainId.SN_GOERLI)});break;case"mainnet-alpha":this.emit("change",{chainId:BigInt(I.constants.StarknetChainId.SN_MAIN)});break;case"goerli-alpha":this.emit("change",{chainId:BigInt(I.constants.StarknetChainId.SN_GOERLI)});break;default:this.emit("change",{});break}}async connect(){if(this.ensureWallet(),!this._wallet)throw new n.ConnectorNotFoundError;let t;try{t=await this._wallet.enable({starknetVersion:"v5"})}catch{throw new n.UserRejectedRequestError}if(!this._wallet.isConnected||!t)throw new n.UserRejectedRequestError;this._wallet.on("accountsChanged",async a=>{await this.onAccountsChanged(a)}),this._wallet.on("networkChanged",a=>{this.onNetworkChanged(a)}),await this.onAccountsChanged(t);const e=this._wallet.account.address,c=await this.chainId();return this.emit("connect",{account:e,chainId:c}),{account:e,chainId:c}}async disconnect(){if(this.ensureWallet(),!this.available())throw new n.ConnectorNotFoundError;if(!this._wallet?.isConnected)throw new n.UserNotConnectedError}async account(){if(this.ensureWallet(),!this._wallet||!this._wallet.account)throw new n.ConnectorNotConnectedError;return this._wallet.account}get id(){return this._options.id}get name(){if(!this._wallet)throw new n.ConnectorNotConnectedError;return this._wallet.name}get icon(){return this._options.icon?this._options.icon:this._wallet?.icon?{dark:this._wallet.icon,light:this._wallet.icon}:{dark:g,light:D}}get wallet(){if(!this._wallet)throw new n.ConnectorNotConnectedError;return this._wallet}ensureWallet(){const e=j(globalThis).filter(c=>c.id===this._options.id)[0];e&&(this._wallet=e)}}function j(M){return Object.values(Object.getOwnPropertyNames(M).reduce((i,t)=>{if(t.startsWith("starknet")){const e=M[t];l(e)&&!i[e.id]&&(i[e.id]=e)}return i},{}))}function l(M){try{return M&&["request","isConnected","provider","enable","isPreauthorized","on","off","version","id","name","icon"].every(i=>i in M)}catch{}return!1}exports.ARGENT_X_ICON=r;exports.InjectedConnector=u;
